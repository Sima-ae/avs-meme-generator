(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{63:(e,r,t)=>{"use strict";var a=t(7260);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},1786:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},1847:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(2115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},i=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:r,...n,width:s,height:s,stroke:t,strokeWidth:o?24*Number(l)/Number(s):l,className:i("lucide",d),...!c&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),o=(e,r)=>{let t=(0,a.forwardRef)((t,n)=>{let{className:o,...d}=t;return(0,a.createElement)(l,{ref:n,iconNode:r,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return t.displayName=s(e),t}},3101:(e,r,t)=>{"use strict";t.d(r,{F:()=>n});var a=t(2821);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=a.$,n=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return i(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:n,defaultVariants:l}=r,o=Object.keys(n).map(e=>{let r=null==t?void 0:t[e],a=null==l?void 0:l[e];if(null===r)return null;let i=s(r)||s(a);return n[e][i]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return i(e,o,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...d}[r]):({...l,...d})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),s=t(2115),i=t(2467),n=t(3101),l=t(4269);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:n,className:t})),ref:r,...c})});d.displayName="Button"},4269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var a=t(2821),s=t(5889);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},5142:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var a=t(5155),s=t(2115),i=t(4269);let n=s.forwardRef((e,r)=>{let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});n.displayName="Input"},5229:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6309:(e,r,t)=>{Promise.resolve().then(t.bind(t,6485))},6485:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var a=t(5155),s=t(2115),i=t(6489),n=t(63),l=t(3998),o=t(5142),d=t(1847);let c=(0,d.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=t(1786);let m=(0,d.A)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),h=(0,d.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var p=t(5229);let f=(0,d.A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);function g(){var e;let{data:r,status:t}=(0,i.useSession)(),d=(0,n.useRouter)(),[g,v]=(0,s.useState)([]),[x,y]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[k,w]=(0,s.useState)(null),[N,C]=(0,s.useState)({x:0,y:0}),[A,M]=(0,s.useState)(null),[E,z]=(0,s.useState)(!0),R=(0,s.useRef)(null),_=(0,s.useRef)(null);(0,s.useEffect)(()=>{"loading"!==t&&U()},[t]);let U=async()=>{try{let e=await fetch("/api/prikbord"),r=await e.json();if(r.success){let e=r.data.map(e=>({id:e.id,x:e.position_x,y:e.position_y,imageUrl:e.image_url,title:e.title,userId:e.user_id}));v(e)}else console.error("Error loading memes:",r.error)}catch(e){console.error("Error loading memes:",e)}finally{z(!1)}},$=async(e,t)=>{var a;if(!(null==r||null==(a=r.user)?void 0:a.id))return void d.push("/auth/signin");try{let a=await fetch("/api/prikbord",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e,title:t||"Meme Kaart",userId:parseInt(r.user.id)})}),s=await a.json();if(s.success){let e={id:s.data.id,x:s.data.position_x,y:s.data.position_y,imageUrl:s.data.image_url,title:s.data.title,userId:s.data.user_id};v(r=>[...r,e])}else console.error("Error adding meme:",s.error)}catch(e){console.error("Error adding meme:",e)}},S=()=>{b.trim()&&($(b.trim()),j(""))},L=async e=>{var t;if((null==r||null==(t=r.user)?void 0:t.id)&&"admin"===r.user.role)try{let r=await fetch("/api/prikbord?id=".concat(e),{method:"DELETE"}),t=await r.json();t.success?v(r=>r.filter(r=>r.id!==e)):console.error("Error removing meme:",t.error)}catch(e){console.error("Error removing meme:",e)}},P=async e=>{if(k&&R.current){let r=R.current.getBoundingClientRect(),t=e.clientX-r.left-N.x,a=e.clientY-r.top-N.y,s=Math.max(0,Math.min(t,r.width-200)),i=Math.max(0,Math.min(a,r.height-200));v(e=>e.map(e=>e.id===k?{...e,x:s,y:i}:e))}},D=async()=>{var e;if(k&&(null==r||null==(e=r.user)?void 0:e.id)&&"admin"===r.user.role)try{let e=g.find(e=>e.id===k);if(e){let r=await fetch("/api/prikbord",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:k,x:e.x,y:e.y})}),t=await r.json();t.success||console.error("Error updating position:",t.error)}}catch(e){console.error("Error updating position:",e)}w(null)},O=()=>{M(null)};return"loading"===t||E?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg",children:"Laden..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 transition-all duration-300 ".concat(x?"fixed inset-0 z-50":""),children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b p-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Prikbord - Memes"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(null==r||null==(e=r.user)?void 0:e.role)==="admin"&&(0,a.jsx)(l.$,{onClick:()=>d.push("/admin"),variant:"outline",size:"sm",children:"Admin Dashboard"}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.p,{placeholder:"Voer afbeelding URL in...",value:b,onChange:e=>j(e.target.value),className:"w-64",onKeyPress:e=>"Enter"===e.key&&S()}),(0,a.jsxs)(l.$,{onClick:S,size:"sm",children:[(0,a.jsx)(c,{className:"w-4 h-4 mr-1"}),"URL Toevoegen"]})]}),(0,a.jsxs)(l.$,{onClick:()=>{var e;return null==(e=_.current)?void 0:e.click()},variant:"outline",size:"sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"PNG Uploaden"]})]}),(0,a.jsx)(l.$,{onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),y(!1)):(document.documentElement.requestFullscreen(),y(!0))},variant:"outline",size:"sm",children:x?(0,a.jsx)(m,{className:"w-4 h-4"}):(0,a.jsx)(h,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{ref:R,className:"relative w-full h-[calc(100vh-80px)] bg-white overflow-hidden",onMouseMove:P,onMouseUp:D,onMouseLeave:D,children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,a.jsx)("div",{className:"w-full h-full",style:{backgroundImage:"\n              linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),\n              linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px)\n            ",backgroundSize:"20px 20px"}})}),g.map(e=>{var t,s;return(0,a.jsx)("div",{className:"absolute select-none ".concat((null==r||null==(t=r.user)?void 0:t.role)==="admin"?"cursor-move":"cursor-pointer"),style:{left:e.x,top:e.y,transform:k===e.id?"rotate(2deg)":"rotate(-1deg)",transition:k===e.id?"none":"transform 0.2s ease"},onMouseDown:t=>((e,t)=>{var a,s;if(!(null==r||null==(a=r.user)?void 0:a.id)||"admin"!==r.user.role)return;e.preventDefault(),w(t);let i=null==(s=R.current)?void 0:s.getBoundingClientRect();if(i){let r=g.find(e=>e.id===t);r&&C({x:e.clientX-i.left-r.x,y:e.clientY-i.top-r.y})}})(t,e.id),children:(0,a.jsxs)("div",{className:"relative w-48 h-48",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-contain hover:opacity-90 transition-opacity duration-200",draggable:!1,onClick:r=>{r.stopPropagation(),M(e.imageUrl)}}),(null==r||null==(s=r.user)?void 0:s.role)==="admin"&&(0,a.jsx)(l.$,{onClick:r=>{r.stopPropagation(),L(e.id)},size:"sm",variant:"destructive",className:"absolute -top-2 -right-2 w-6 h-6 p-0 rounded-full shadow-lg",children:(0,a.jsx)(p.A,{className:"w-3 h-3"})})]})},e.id)}),0===g.length&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCCC"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Nog geen memes geplaatst"}),(0,a.jsx)("p",{className:"text-sm",children:r?"Upload jouw gegeneerde meme om te beginnen!":"Log in om memes toe te voegen aan het prikbord!"}),!r&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(l.$,{onClick:()=>d.push("/auth/signin"),size:"sm",style:{backgroundColor:"#30302e"},children:[(0,a.jsx)(f,{className:"w-4 h-4 mr-2"}),"Inloggen"]})})]})})]}),(0,a.jsx)("input",{ref:_,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(t){let e=new FileReader;e.onload=e=>{var r;$(null==(r=e.target)?void 0:r.result,t.name)},e.readAsDataURL(t)}},className:"hidden"}),A&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:O,children:(0,a.jsxs)("div",{className:"relative max-w-4xl max-h-full",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("img",{src:A,alt:"Full size meme",className:"max-w-full max-h-full object-contain"}),(0,a.jsx)(l.$,{onClick:O,size:"sm",variant:"destructive",className:"absolute -top-2 -right-2 w-8 h-8 p-0 rounded-full shadow-lg",children:(0,a.jsx)(p.A,{className:"w-4 h-4"})})]})})]})}}},e=>{e.O(0,[239,489,441,255,358],()=>e(e.s=6309)),_N_E=e.O()}]);